<html>
  <head>
    <script src='src/TaskManager.js'></script>
  </head>
  <body style='margin: 0px'>
    <input id='i' style='font-family: monospace'></input>
    <div id='o'></div>
    <script>
      // commands: + add, - del, @ mov move, * adj adjust, < op open, > cl close, ! un undo, ; new command
      // TODO: for names, auto completion (fewest amount of characters to disambiguate)
      let i = document.getElementById('i');
      let o = document.getElementById('o');
      let t = new TaskManager(); //TODO: retrieve from localstorage
      function adjustSizes() {
        i.style.width = o.style.width = '100%';
        o.style.height = (window.innerHeight - i.getBoundingClientRect().bottom) + 'px';
      }
      function updateOutput() {
        // TODO: render TaskManager (make Display class?)
      }
      function runInput() {
        let input = i.value;
        console.log('running ' + input);
        let instructions = input.split(/;/).map(s => s.trim()).filter(s => s != '');
        console.log('instructions:', instructions);
        //TODO: parse instructions, generate instruction list, emit compiled js, evaluate compiled js
        updateOutput();
      }
      i.onkeydown = function(event) {
        if (event.keyCode == 13) {
          runInput();
          i.value = '';
        }
      }
      adjustSizes();
      window.onresize = adjustSizes;
    </script>
  </body>
</html>